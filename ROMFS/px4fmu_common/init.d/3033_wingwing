#!nsh
#
# @name Wing Wing (aka Z-84) Flying Wing
#
# @url https://pixhawk.org/platforms/planes/z-84_wing_wing
#
# @type Flying Wing
#
# @output MAIN1 left aileron
# @output MAIN2 right aileron
# @output MAIN4 throttle
#
# @output AUX1 feed-through of RC AUX1 channel
# @output AUX2 feed-through of RC AUX2 channel
# @output AUX3 feed-through of RC AUX3 channel
#
# @maintainer Lorenz Meier <lorenz@px4.io>
#

sh /etc/init.d/rc.fw_defaults

if [ $AUTOCNF == yes ]
then

	param set BAT_N_CELLS 7
	param set SYS_RESTART_TYPE 2
	param set SYS_MC_EST_GROUP 2
	param set CAL_GYRO0_ID 2293768
	param set CAL_ACC0_ID 1376264
	param set CAL_ACC1_ID 1310728
	#param set CAL_MAG0_ID 196616
	param set CAL_GYRO0_XOFF 0.01
	param set CAL_ACC0_XOFF 0.01
	param set CAL_ACC0_YOFF -0.01
	param set CAL_ACC0_ZOFF 0.01
	param set CAL_ACC0_XSCALE 1.01
	param set CAL_ACC0_YSCALE 1.01
	param set CAL_ACC0_ZSCALE 1.01
	param set CAL_ACC1_XOFF 0.01
	param set CAL_MAG0_XOFF 0.01
	param set SENS_BOARD_ROT 0
	param set SENS_DPRES_OFF 0.001
	param set SENS_BOARD_X_OFF 0.000001
	param set COM_RC_IN_MODE 1
	param set FW_THR_IDLE 0.0
	param set EKF2_GBIAS_INIT 0.01
	param set EKF2_ANGERR_INIT 0.01
	param set EKF2_MAG_TYPE 1
	param set FW_AIRSPD_MAX 8
	param set FW_AIRSPD_MIN 0
	param set FW_AIRSPD_TRIM 6
	param set FW_PR_I 0.0
	param set FW_RR_I 0.0

fi

# Configure this as plane
set MAV_TYPE 1
# Set mixer
set MIXER wingwing
# Provide ESC a constant 1000 us pulse
set PWM_OUT 1234
set PWM_DISARMED 1500
