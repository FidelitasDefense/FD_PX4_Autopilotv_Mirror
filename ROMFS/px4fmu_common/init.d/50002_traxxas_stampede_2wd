#!nsh
#
# @name Traxxas stampede vxl 2wd
#
# @url https://traxxas.com/products/models/electric/stampede-vxl-tsm
#
# @type Rover using Flying Wing configuration
#
# 
# @output MAIN2 steering
# @output MAIN4 throttle
#
# @output AUX1 feed-through of RC AUX1 channel
# @output AUX2 feed-through of RC AUX2 channel
# @output AUX3 feed-through of RC AUX3 channel
#
# @maintainer Marco Zorzi
#

sh /etc/init.d/rc.fw_defaults

if [ $AUTOCNF == yes ]
then
	param set BAT_N_CELLS 7
	
	param set FW_MAN_R_MAX 90

	param set FW_YR_FF 0.0
	param set FW_YR_I 0.0
	param set FW_YR_IMAX 0.0
	param set FW_YR_P 0.0

	param set FW_THR_CRUISE 2.0
	param set FW_THR_IDLE 0.0
	param set FW_THR_LND_MAX 20.0
	param set FW_THR_MAX 5.0

	param set FW_AIRSPD_MIN 0
	param set FW_AIRSPD_TRIM 1
	param set FW_AIRSPD_MAX 3
	
	param set NAV_ACC_RAD 0.5
	param set NAV_LOITER_RAD 2

	param set MIS_LTRMIN_ALT 0.01
	param set MIS_TAKEOFF_ALT 0.01
	
	param set EKF2_GBIAS_INIT 0.01
	param set EKF2_ANGERR_INIT 0.01
	param set EKF2_MAG_TYPE 1

fi

# Configure this as plane
set MAV_TYPE 1
# Set mixer
set MIXER stampede
# Provide ESC a constant 1500 us pulse
set PWM_OUT 4
set PWM_RATE 50
set PWM_DISARMED 1500
set PWM_MAIN_REV2 1
set PWM_MAX 2000
set PWM_MIN 1000
