machine:
  services:
    - docker

checkout:
  post:
    - git submodule sync
    - git submodule update --init --recursive

## Customize dependencies
dependencies:
  pre:
    - docker pull px4io/px4-dev-base
    - docker info

test:
  override:
    - whoami
    - echo $UID
    - ls -lsa $HOME
    - ccache -s
    - docker run --rm -v `pwd`:`pwd`:rw -v $HOME/.ccache:$HOME/.ccache:rw -e CCACHE_DIR=$HOME/.ccache -w=`pwd` --user=$UID -it px4io/px4-dev-base /bin/bash -c "make"

